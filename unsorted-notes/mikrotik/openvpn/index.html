



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://voronenko.info/unsorted-notes/mikrotik/openvpn/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-4.6.3">
    
    
      
        <title>Openvpn - Personal portal</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../css/pandas-dataframe.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#paste-your-user-certificate-here" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://voronenko.info" title="Personal portal" aria-label="Personal portal" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Personal portal
            </span>
            <span class="md-header-nav__topic">
              
                Openvpn
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://voronenko.info" title="Personal portal" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Personal portal
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Debug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Debug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../debug/admonition/" title="Admonition" class="md-nav__link">
      Admonition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../debug/codehilite/" title="CodeHilite" class="md-nav__link">
      CodeHilite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../debug/debug/" title="Debug" class="md-nav__link">
      Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../debug/footnotes/" title="Footnotes" class="md-nav__link">
      Footnotes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../debug/metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../debug/permalinks/" title="Permalinks" class="md-nav__link">
      Permalinks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../debug/pymdown/" title="PyMdown Extensions" class="md-nav__link">
      PyMdown Extensions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Unsorted notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Unsorted notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../acme_sh/" title="Acme sh" class="md-nav__link">
      Acme sh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../circleci/" title="Circleci" class="md-nav__link">
      Circleci
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../exsi/" title="Exsi" class="md-nav__link">
      Exsi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../golang/" title="Golang" class="md-nav__link">
      Golang
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ignite/" title="Ignite" class="md-nav__link">
      Ignite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jetbrains/" title="Jetbrains" class="md-nav__link">
      Jetbrains
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jsonnet/" title="Jsonnet" class="md-nav__link">
      Jsonnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../letsencrypt_acme/" title="Letsencrypt acme" class="md-nav__link">
      Letsencrypt acme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maven/" title="Maven" class="md-nav__link">
      Maven
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openshift/" title="Openshift" class="md-nav__link">
      Openshift
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openvpn/" title="Openvpn" class="md-nav__link">
      Openvpn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgres/" title="Postgres" class="md-nav__link">
      Postgres
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../privacy-straisend/" title="Privacy straisend" class="md-nav__link">
      Privacy straisend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../scripts_shell/" title="Scripts shell" class="md-nav__link">
      Scripts shell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ssh_keys/" title="Ssh keys" class="md-nav__link">
      Ssh keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ubuntu/" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-17" type="checkbox" id="nav-3-17">
    
    <label class="md-nav__link" for="nav-3-17">
      Aws
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-17">
        Aws
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../aws/aws/" title="Aws" class="md-nav__link">
      Aws
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../aws/security-tools/" title="Security tools" class="md-nav__link">
      Security tools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-18" type="checkbox" id="nav-3-18">
    
    <label class="md-nav__link" for="nav-3-18">
      Azure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-18">
        Azure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../azure/azure_intro/" title="Azure intro" class="md-nav__link">
      Azure intro
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-19" type="checkbox" id="nav-3-19">
    
    <label class="md-nav__link" for="nav-3-19">
      Dotnet
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-19">
        Dotnet
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dotnet/core/" title="Core" class="md-nav__link">
      Core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dotnet/environment_vars_in_apppools/" title="Environment vars in apppools" class="md-nav__link">
      Environment vars in apppools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-20" type="checkbox" id="nav-3-20">
    
    <label class="md-nav__link" for="nav-3-20">
      Frontend
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-20">
        Frontend
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../frontend/sass/" title="Sass" class="md-nav__link">
      Sass
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-21" type="checkbox" id="nav-3-21">
    
    <label class="md-nav__link" for="nav-3-21">
      Github
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-21">
        Github
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../github/actions/" title="Actions" class="md-nav__link">
      Actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../github/official/" title="Official" class="md-nav__link">
      Official
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-22" type="checkbox" id="nav-3-22">
    
    <label class="md-nav__link" for="nav-3-22">
      Kong
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-22">
        Kong
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../kong/auth0/" title="Auth0" class="md-nav__link">
      Auth0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-23" type="checkbox" id="nav-3-23">
    
    <label class="md-nav__link" for="nav-3-23">
      Kubernetes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-23">
        Kubernetes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../kubernetes/StaticIP/" title="StaticIP" class="md-nav__link">
      StaticIP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kubernetes/basic_commands_2_2/" title="Basic commands 2 2" class="md-nav__link">
      Basic commands 2 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kubernetes/helm/" title="Helm" class="md-nav__link">
      Helm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kubernetes/letsencrypt/" title="Letsencrypt" class="md-nav__link">
      Letsencrypt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../kubernetes/pods/" title="Pods" class="md-nav__link">
      Pods
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-24" type="checkbox" id="nav-3-24" checked>
    
    <label class="md-nav__link" for="nav-3-24">
      Mikrotik
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-24">
        Mikrotik
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gns3/" title="Gns3" class="md-nav__link">
      Gns3
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Openvpn" class="md-nav__link md-nav__link--active">
      Openvpn
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../routing-list/" title="Routing list" class="md-nav__link">
      Routing list
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-25" type="checkbox" id="nav-3-25">
    
    <label class="md-nav__link" for="nav-3-25">
      Pm templates
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-25">
        Pm templates
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../pm-templates/code-reviews/" title="Code reviews" class="md-nav__link">
      Code reviews
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-26" type="checkbox" id="nav-3-26">
    
    <label class="md-nav__link" for="nav-3-26">
      Security tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-26">
        Security tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security-tools/owasp_zap/" title="Owasp zap" class="md-nav__link">
      Owasp zap
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-27" type="checkbox" id="nav-3-27">
    
    <label class="md-nav__link" for="nav-3-27">
      Terraform
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-27">
        Terraform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../terraform/Terraform-companion-blast-radius/" title="Terraform companion blast radius" class="md-nav__link">
      Terraform companion blast radius
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Blog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Blog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../blog/2020/05/21/community-days-nordic-2020/" title="AWS Community Nordics community day 2020 (05/21/20)" class="md-nav__link">
      AWS Community Nordics community day 2020 (05/21/20)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script>
(function() {
  function addWidgetsRenderer() {
    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var scriptElement = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    scriptElement.src = widgetRendererSrc;
    document.body.appendChild(scriptElement);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>

<div class="cell border-box-sizing text_cell rendered">
<p><div class="inner_cell" markdown="1"><br />
<div class="text_cell_render border-box-sizing rendered_html" markdown="1"><br />
Generate CA and Certificates<br />
To use OpenVPN securely, we’ll need certificates. Make sure to change the values (my_ca_name and 10.0.0.1) below to match your desired configuration! First, we’ll generate the certificate authority (CA):</p>
<div class="codehilite"><pre><span></span><code><span class="err">/certificate</span>
<span class="err">add name=my_ca_name common-name=my_ca_name key-usage=cert-sign,crl-sign</span>
<span class="err">sign my_ca_name ca-crl-host=my_router_ip_address name=my_ca_name</span>
<span class="err">export-certificate my_ca_name</span>
</code></pre></div>

<p>The above commands will do the following:</p>
<p>Add a new CA certificate called my_ca_name<br />
Sign the certificate<br />
Export the certificate as my_ca_name<br />
Next we’ll generate the certificate for our VPN (change the values my_vpn_server, my_user, my_ca_name and please_use_a_good_passphrase):</p>
<div class="codehilite"><pre><span></span><code><span class="err">/certificate</span>
<span class="err">add name=my_vpn_server common-name=my_vpn_server</span>
<span class="err">add name=my_user common-name=my_user</span>
<span class="err">sign my_vpn_server ca=my_ca_name name=my_vpn_server</span>
<span class="err">sign my_user ca=my_ca_name name=my_user</span>
<span class="err">export-certificate export-passphrase=please_use_a_good_passphrase my_user</span>
</code></pre></div>

<p>These commands will:</p>
<p>Add a new server certificate called my_vpn_server<br />
Add a new user certificate called my_user<br />
Sign both certificates<br />
Export the user certificate as my_user, with the passphrase: please_use_a_good_passphrase – change this!<br />
Configure IP Pool, PPP Profile and Login Credentials<br />
Create an IP pool called ovpn-pool with a range of IP addresses, here we’ll use 10.0.1.100-10.0.1.200:</p>
<div class="codehilite"><pre><span></span><code><span class="err">/ip</span>
<span class="err">pool add name=ovpn-pool range=10.0.1.100-10.0.1.200</span>
</code></pre></div>

<p>Create a PPP profile with associated PPP credentials (don’t forget to change these values: my_ppp_profile, 10.0.0.1, my_ppp_user, please_use_a_good_password to match your configuration):</p>
<div class="codehilite"><pre><span></span><code><span class="err">/ppp</span>
<span class="err">profile add name=my_ppp_profile local-address=10.0.0.1 remote-address=ovpn-pool dns-server=10.0.0.1</span>
<span class="err">secret add name=my_ppp_user password=please_use_a_good_password profile=my_ppp_profile</span>
</code></pre></div>

<p>Create OpenVPN Server Interface<br />
The following command will cerate an OpenVPN server interface in RouterOS, with your server certificate (my_vpn_server), sha1 authentication, aes256 encryption, running on port 1194 (default):</p>
<div class="codehilite"><pre><span></span><code><span class="err">/interface</span>
<span class="err">ovpn-server server set enabled=yes certificate=my_vpn_server auth=sha1 cipher=aes256 port=1194 netmask=24 require-client-certificate=yes mode=ip</span>
</code></pre></div>

<p>Configure Firewall to Allow OpenVPN Connections<br />
Make sure your router allows incoming TCP connections on port (1194 below matches your configuration above):</p>
<div class="codehilite"><pre><span></span><code><span class="err">/ip firewall filter</span>
<span class="err">add chain=input protocol=tcp dst-port=1194 action=accept place-before=0 comment=&quot;Allow OpenVPN&quot;</span>
</code></pre></div>

<p>Let’s clear the console history to get rid of sensitive information:</p>
<div class="codehilite"><pre><span></span><code><span class="err">/console clear-history</span>
</code></pre></div>

<p>Now we have a working OpenVPN server running on MikroTik RouterOS!</p>
<p>Client Configuration<br />
To connect to your newly configured OpenVPN server, you need to configure your clients as well. A sample OpenVPN client configuration can look like this, based on the values we have entered earlier (example.com, 10.0.0.1, 1194, and you’ll also need to paste the CA certificate, user certificate and private keys generated earlier in this tutorial where it says so below):</p>
<div class="codehilite"><pre><span></span><code><span class="err">client</span>
<span class="err">dev tun</span>
<span class="err">proto tcp</span>
<span class="err">remote example.com 1194</span>
<span class="err">resolv-retry infinite</span>
<span class="err">nobind</span>
<span class="err">persist-key</span>
<span class="err">persist-tun</span>
<span class="err">verb 1 </span>
<span class="err">cipher AES-256-CBC</span>
<span class="err">auth SHA1</span>
<span class="err">auth-user-pass</span>
<span class="err">dhcp-option DOMAIN example.com</span>
<span class="err">dhcp-option DNS 10.0.0.1</span>
<span class="err">redirect-gateway def1</span>
<span class="err">route 0.0.0.0 0.0.0.0 10.0.0.1 1</span>
<span class="err">route 10.0.0.0 255.255.255.0</span>
</code></pre></div>

<p><div class="codehilite"><pre><span></span><code><span class="nt">&lt;ca&gt;</span>
-----BEGIN CERTIFICATE-----
# paste your CA certificate here #
-----END CERTIFICATE-----
<span class="nt">&lt;/ca&gt;</span>
````
</code></pre></div><br />
<cert><br />
-----BEGIN CERTIFICATE-----</p>
<h1 id="paste-your-user-certificate-here">paste your user certificate here<a class="headerlink" href="#paste-your-user-certificate-here" title="Permanent link">&para;</a></h1>
<p>-----END CERTIFICATE-----<br />
</cert><br />
<div class="codehilite"><pre><span></span><code>
</code></pre></div><br />
<key><br />
-----BEGIN RSA PRIVATE KEY-----</p>
<h1 id="paste-your-user-private-key-here">paste your user private key here<a class="headerlink" href="#paste-your-user-private-key-here" title="Permanent link">&para;</a></h1>
<p>-----END RSA PRIVATE KEY-----<br />
</key><br />
```<br />
</div><br />
</div></p>
</div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../gns3/" title="Gns3" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Gns3
              </span>
            </div>
          </a>
        
        
          <a href="../routing-list/" title="Routing list" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Routing list
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://www.voronenko.info" target="_blank" rel="noopener" title="globe" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/voronenko" target="_blank" rel="noopener" title="github-alt" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/slavko" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/in/voronenkovyacheslav/" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:"../../.."}})</script>
      
    
  </body>
</html>